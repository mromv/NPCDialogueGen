# NPC Dialogue Generation

Сервис предназначен для автоматической генерации диалогов NPC для сюжетных игр. Генерация происходит в два этапа:
1. **Построение структуры (дерева) диалога** — создаётся дерево с верхнеуровневым сюжетом и развилками.
2. **Генерация реплик и вариантов** — для каждой ноды дерева генерируются реплики NPC и варианты ответов игрока.

## Основные компоненты

- `app/services/tree_generator.py` — генерация структуры диалогового дерева (сюжет, ветвления, связи между нодами).
- `app/services/content_writer.py` — генерация содержимого для каждой ноды (реплики NPC, варианты выбора игрока).
- `app/schemas/` — pydantic-модели для описания персонажей, целей, ограничений, структуры дерева и содержимого диалога.
- `app/utils/prompts.py` и `app/utils/system_prompts.py` — шаблоны промптов для LLM (Large Language Model), управляющие генерацией структуры и контента.

## Установка зависимостей

```bash
pip install -r requirements.txt
```

## Запуск теста

Для проверки работоспособности генерации выполните:

```bash
python -m tests.test_diag_gen
```
